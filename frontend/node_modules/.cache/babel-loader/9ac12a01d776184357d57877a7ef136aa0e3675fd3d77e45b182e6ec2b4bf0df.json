{"ast":null,"code":"import _slicedToArray from\"C:/Users/paulm/Documents/Local Programming/Websites/SnowFinder/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef,useState}from'react';import'./App.css';import useStomp from'./hooks/useStomp';import useLoadSnowResults from'./hooks/useParseSnowResults';import ZipCodeRequest from'./classes/ZipCodeRequest';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SOCKET_URL='ws://localhost:8080/snow-finder';var snowballFight=require('./resources/snowball-fight-cropped.gif');var SNOWBALL_FIGHT_RESTART_SECS=15;function App(){var _snowballFightRef$cur;var _useStomp=useStomp(SOCKET_URL),message=_useStomp.message,send=_useStomp.send;var _useLoadSnowResults=useLoadSnowResults({message:message}),citiesWithSnow=_useLoadSnowResults.citiesWithSnow,toLoadNumber=_useLoadSnowResults.toLoadNumber,loadedNumber=_useLoadSnowResults.loadedNumber,city=_useLoadSnowResults.city,log=_useLoadSnowResults.log,reset=_useLoadSnowResults.reset;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),zipCode=_useState2[0],setZipCode=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),radius=_useState4[0],setRadius=_useState4[1];var _useState5=useState('zipCode'),_useState6=_slicedToArray(_useState5,2),searchType=_useState6[0],setSearchType=_useState6[1];// 'id' prop of radio button checked\nvar snowballFightRef=useRef(null);var onTabChange=function onTabChange(e){setSearchType(String(e.target.id));};var submit=function submit(){reset();if(searchType==='zipCode'){send('/find/snowUsingZip',JSON.stringify(new ZipCodeRequest(zipCode,radius)));}else{send(\"/find/snowInUS\");}};useEffect(function(){setTimeout(restartSnowballFight,Math.random()*SNOWBALL_FIGHT_RESTART_SECS*1000);},[(_snowballFightRef$cur=snowballFightRef.current)===null||_snowballFightRef$cur===void 0?void 0:_snowballFightRef$cur.getAttribute('src')]);var restartSnowballFight=function restartSnowballFight(){if(!snowballFightRef.current)return;var s=snowballFightRef.current.getAttribute('src');snowballFightRef.current.setAttribute('src','');snowballFightRef.current.setAttribute('src',s!==null&&s!==void 0?s:'');};return/*#__PURE__*/_jsxs(\"div\",{className:'body',children:[/*#__PURE__*/_jsx(\"div\",{className:\"blueSky\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputContainer\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"SnowFinder\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"tabs d-inline\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"tab invisible\",type:\"radio\",id:\"zipCode\",name:\"findType\",value:\"snowUsingZip\",onChange:onTabChange,checked:searchType==='zipCode'}),/*#__PURE__*/_jsx(\"label\",{className:\"tabLabel \".concat(searchType==='zipCode'?'activeTab':''),htmlFor:\"zipCode\",children:\"Zip Code Radius\"}),/*#__PURE__*/_jsx(\"span\",{children:\"|\"}),/*#__PURE__*/_jsx(\"input\",{className:\"tab invisible\",type:\"radio\",id:\"USCities\",name:\"findType\",value:\"snowInUS\",onChange:onTabChange,checked:searchType==='USCities'}),/*#__PURE__*/_jsx(\"label\",{className:\"tabLabel \".concat(searchType==='USCities'?'activeTab':''),htmlFor:\"USCities\",children:\"Major US Cities\"})]}),searchType==='zipCode'?/*#__PURE__*/_jsxs(\"div\",{className:\"d-inline\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Search Location:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:'text',placeholder:'Zip Code',value:zipCode,onChange:function onChange(e){return setZipCode(Number(e.target.value));}}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:'text',placeholder:'Radius',value:radius,onChange:function onChange(e){return setRadius(Number(e.target.value));}})]}):null,/*#__PURE__*/_jsx(\"button\",{className:searchType==='USCities'?'button-majorCities':'',onClick:submit,children:searchType==='USCities'?'Search major cities in the US':'Search'}),toLoadNumber?/*#__PURE__*/_jsxs(\"div\",{className:\"results\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"citiesWithSnow\",children:citiesWithSnow}),/*#__PURE__*/_jsx(\"span\",{children:\"\\xA0cities found with snow (\"}),/*#__PURE__*/_jsx(\"div\",{className:\"loaded\",children:loadedNumber}),/*#__PURE__*/_jsx(\"span\",{children:\"\\xA0cities searched)\"}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:log}})]}):null]}),/*#__PURE__*/_jsx(\"img\",{ref:snowballFightRef,src:snowballFight,className:\"snowball-fight\"})]});}export default App;","map":{"version":3,"names":["React","useEffect","useRef","useState","useStomp","useLoadSnowResults","ZipCodeRequest","jsx","_jsx","jsxs","_jsxs","SOCKET_URL","snowballFight","require","SNOWBALL_FIGHT_RESTART_SECS","App","_snowballFightRef$cur","_useStomp","message","send","_useLoadSnowResults","citiesWithSnow","toLoadNumber","loadedNumber","city","log","reset","_useState","_useState2","_slicedToArray","zipCode","setZipCode","_useState3","_useState4","radius","setRadius","_useState5","_useState6","searchType","setSearchType","snowballFightRef","onTabChange","e","String","target","id","submit","JSON","stringify","setTimeout","restartSnowballFight","Math","random","current","getAttribute","s","setAttribute","className","children","type","name","value","onChange","checked","concat","htmlFor","placeholder","Number","onClick","dangerouslySetInnerHTML","__html","ref","src"],"sources":["C:/Users/paulm/Documents/Local Programming/Websites/SnowFinder/frontend/src/App.tsx"],"sourcesContent":["import React, { createRef, useEffect, useRef, useState } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport useStomp from './hooks/useStomp';\nimport useLoadSnowResults from './hooks/useParseSnowResults';\nimport ZipCodeRequest from './classes/ZipCodeRequest';\n\nconst SOCKET_URL = 'ws://localhost:8080/snow-finder';\n\nconst snowballFight = require('./resources/snowball-fight-cropped.gif');\nconst SNOWBALL_FIGHT_RESTART_SECS = 15;\n\nfunction App() {\n\n    const { message, send } = useStomp(SOCKET_URL);\n    const { citiesWithSnow, toLoadNumber, loadedNumber, city, log, reset } = useLoadSnowResults({ message });\n\n    const [zipCode, setZipCode] = useState(0);\n    const [radius, setRadius] = useState(0);\n    const [searchType, setSearchType] = useState('zipCode'); // 'id' prop of radio button checked\n\n    const snowballFightRef = useRef<HTMLImageElement>(null);\n\n    const onTabChange = (e: any) => {\n        setSearchType(String(e.target.id));\n    }\n\n    const submit = () => {\n        reset();\n        if (searchType === 'zipCode') {\n            send('/find/snowUsingZip', JSON.stringify(new ZipCodeRequest(zipCode, radius)))\n        } else {\n            send(\"/find/snowInUS\");\n        }\n    }\n\n    useEffect(() => {\n        setTimeout(restartSnowballFight, Math.random() * SNOWBALL_FIGHT_RESTART_SECS * 1000);\n    }, [snowballFightRef.current?.getAttribute('src')]);\n\n    const restartSnowballFight = () => {\n        if (!snowballFightRef.current) return;\n\n        let s = snowballFightRef.current.getAttribute('src');\n        snowballFightRef.current.setAttribute('src', '');\n        snowballFightRef.current.setAttribute('src', s ?? '');\n    }\n\n    return (\n        <div className={'body'}>\n            <div className='blueSky'></div>\n            <div className='inputContainer'>\n                <h1>SnowFinder</h1>\n                <div className='tabs d-inline'>\n                    <input \n                        className='tab invisible' \n                        type=\"radio\" \n                        id=\"zipCode\" \n                        name=\"findType\" \n                        value=\"snowUsingZip\" \n                        onChange={onTabChange}\n                        checked={searchType === 'zipCode'}\n                    />\n                    <label \n                        className={`tabLabel ${searchType === 'zipCode' ? 'activeTab' : ''}`} \n                        htmlFor=\"zipCode\"\n                    >\n                        Zip Code Radius\n                    </label>\n                    <span>|</span>\n                    <input \n                        className='tab invisible' \n                        type=\"radio\" \n                        id=\"USCities\" \n                        name=\"findType\" \n                        value=\"snowInUS\" \n                        onChange={onTabChange}\n                        checked={searchType === 'USCities'}\n                    />\n                    <label \n                        className={`tabLabel ${searchType === 'USCities' ? 'activeTab' : ''}`}  \n                        htmlFor=\"USCities\"\n                    >\n                        Major US Cities\n                    </label>\n                </div>\n                {searchType === 'zipCode' ? (\n                    <div className='d-inline'>\n                        <label>\n                            Search Location:\n                        </label>\n                        <input \n                            className='input'\n                            type={'text'} \n                            placeholder={'Zip Code'}\n                            value={zipCode}\n                            onChange={(e) => setZipCode(Number(e.target.value))}\n                        />\n                        <input \n                            className='input'\n                            type={'text'} \n                            placeholder={'Radius'}\n                            value={radius}\n                            onChange={(e) => setRadius(Number(e.target.value))}\n                        />\n                    </div>\n                ) : null}\n                \n                <button className={searchType === 'USCities' ? 'button-majorCities' : ''} onClick={submit}>\n                    {searchType === 'USCities' ? 'Search major cities in the US' : 'Search'}\n                </button>\n                {toLoadNumber ? (\n                    <div className='results'>\n                        <div className='citiesWithSnow'>{citiesWithSnow}</div>\n                        <span>&nbsp;cities found with snow (</span>\n                        <div className='loaded'>{loadedNumber}</div>\n                        <span>&nbsp;cities searched)</span>\n\n                        <div dangerouslySetInnerHTML={{__html: log}} ></div>\n                    </div>\n                ) : null}\n            </div>\n            <img ref={snowballFightRef} src={snowballFight} className='snowball-fight' />\n        </div>\n    )\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}