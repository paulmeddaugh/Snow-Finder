{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport SockJS from 'sockjs-client';\nimport { Client } from \"@stomp/stompjs\";\nimport FindObject from \"../classes/FindObject\";\nlet stompClient;\nexport default function useStomp(connectionUrl) {\n  _s();\n  const [message, setMessage] = useState('');\n  useEffect(() => {\n    connectionUrl = 'http://localhost:8080/find-snow';\n    const socket = new SockJS(connectionUrl);\n    const client = new Client({\n      brokerURL: connectionUrl\n    });\n    client.onConnect = () => {\n      client.subscribe('/results/snow', function (greeting) {\n        setMessage(JSON.parse(greeting.body).name);\n      });\n    };\n    client.onStompError = function (frame) {\n      // Will be invoked in case of error encountered at Broker\n      // Bad login/passcode typically will cause an error\n      // Complaint brokers will set `message` header with a brief message. Body may contain details.\n      // Compliant brokers will terminate the connection after any error\n      console.log('Broker reported error: ' + frame.headers['message']);\n      console.log('Additional details: ' + frame.body);\n    };\n  }, [connectionUrl]);\n  const send = () => {\n    stompClient.send(\"/find/snow\", {}, JSON.stringify(new FindObject('zip', 74467, 50)));\n  };\n  return {\n    message,\n    send\n  };\n}\n_s(useStomp, \"3v4ozrfWvlmZ97O5zgyhgDZKC+M=\");","map":{"version":3,"names":["useEffect","useState","SockJS","Client","FindObject","stompClient","useStomp","connectionUrl","_s","message","setMessage","socket","client","brokerURL","onConnect","subscribe","greeting","JSON","parse","body","name","onStompError","frame","console","log","headers","send","stringify"],"sources":["C:/Users/paulm/Documents/Local Programming/Websites/SnowFinder/frontend/src/hooks/useStomp.ts"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\nimport SockJS from 'sockjs-client';\r\nimport { CompatClient, Stomp, Client } from \"@stomp/stompjs\";\r\nimport FindObject from \"../classes/FindObject\";\r\n\r\nlet stompClient: CompatClient;\r\n\r\nexport default function useStomp(connectionUrl: string) {\r\n    const [message, setMessage] = useState('');\r\n\r\n    useEffect(() => {\r\n        connectionUrl = 'http://localhost:8080/find-snow';\r\n        const socket = new SockJS(connectionUrl);\r\n        const client = new Client({ brokerURL: connectionUrl });\r\n        client.onConnect = () => {\r\n            client.subscribe('/results/snow', function (greeting) {\r\n                setMessage(JSON.parse(greeting.body).name);\r\n            });\r\n        };\r\n        client.onStompError = function (frame) {\r\n            // Will be invoked in case of error encountered at Broker\r\n            // Bad login/passcode typically will cause an error\r\n            // Complaint brokers will set `message` header with a brief message. Body may contain details.\r\n            // Compliant brokers will terminate the connection after any error\r\n            console.log('Broker reported error: ' + frame.headers['message']);\r\n            console.log('Additional details: ' + frame.body);\r\n          };\r\n    }, [connectionUrl]);\r\n\r\n    const send = () => {\r\n        stompClient.send(\"/find/snow\", {}, JSON.stringify(new FindObject('zip', 74467, 50)));\r\n    };\r\n\r\n    return {\r\n        message,\r\n        send\r\n    }\r\n}"],"mappings":";AAAA,SAASA,SAAS,EAAUC,QAAQ,QAAQ,OAAO;AACnD,OAAOC,MAAM,MAAM,eAAe;AAClC,SAA8BC,MAAM,QAAQ,gBAAgB;AAC5D,OAAOC,UAAU,MAAM,uBAAuB;AAE9C,IAAIC,WAAyB;AAE7B,eAAe,SAASC,QAAQA,CAACC,aAAqB,EAAE;EAAAC,EAAA;EACpD,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAE1CD,SAAS,CAAC,MAAM;IACZO,aAAa,GAAG,iCAAiC;IACjD,MAAMI,MAAM,GAAG,IAAIT,MAAM,CAACK,aAAa,CAAC;IACxC,MAAMK,MAAM,GAAG,IAAIT,MAAM,CAAC;MAAEU,SAAS,EAAEN;IAAc,CAAC,CAAC;IACvDK,MAAM,CAACE,SAAS,GAAG,MAAM;MACrBF,MAAM,CAACG,SAAS,CAAC,eAAe,EAAE,UAAUC,QAAQ,EAAE;QAClDN,UAAU,CAACO,IAAI,CAACC,KAAK,CAACF,QAAQ,CAACG,IAAI,CAAC,CAACC,IAAI,CAAC;MAC9C,CAAC,CAAC;IACN,CAAC;IACDR,MAAM,CAACS,YAAY,GAAG,UAAUC,KAAK,EAAE;MACnC;MACA;MACA;MACA;MACAC,OAAO,CAACC,GAAG,CAAC,yBAAyB,GAAGF,KAAK,CAACG,OAAO,CAAC,SAAS,CAAC,CAAC;MACjEF,OAAO,CAACC,GAAG,CAAC,sBAAsB,GAAGF,KAAK,CAACH,IAAI,CAAC;IAClD,CAAC;EACP,CAAC,EAAE,CAACZ,aAAa,CAAC,CAAC;EAEnB,MAAMmB,IAAI,GAAGA,CAAA,KAAM;IACfrB,WAAW,CAACqB,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,EAAET,IAAI,CAACU,SAAS,CAAC,IAAIvB,UAAU,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC;EACxF,CAAC;EAED,OAAO;IACHK,OAAO;IACPiB;EACJ,CAAC;AACL;AAAClB,EAAA,CA9BuBF,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}