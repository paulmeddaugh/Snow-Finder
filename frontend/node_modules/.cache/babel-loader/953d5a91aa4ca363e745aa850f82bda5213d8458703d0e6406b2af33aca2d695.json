{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport CityResponse from \"src/classes/CityResponse\";\n;\nconst cityPropMap = ['hasSnow', 'name', 'state', 'snowDepth', 'temp', 'distanceAway'];\nexport default function useLoadSnowResults(props) {\n  _s();\n  const {\n    message\n  } = props;\n  const [citiesWithSnow, setCitiesWithSnow] = useState(0);\n  const [loadedNumber, setLoadedNumber] = useState(0);\n  const [toLoadNumber, setToLoadNumber] = useState(0);\n  const [otherMessage, setOtherMessage] = useState('');\n  const [city, setCity] = useState(new CityResponse());\n  useEffect(() => {\n    console.log(message);\n    if (message[0] === 'X' || message[0] === 'O') {\n      const cityProps = {};\n      for (let val of message.split(',')) {\n        cityProps[`${cityPropMap.shift()}`] = val;\n      }\n      setCity(cityProps);\n      if (cityProps.hasSnow) setCitiesWithSnow(prev => ++prev);\n      setLoadedNumber(prev => ++prev);\n    } else if (message.indexOf(' results') !== -1) {\n      setToLoadNumber(Number(message.substring(0, message.indexOf(' '))));\n    } else {\n      setOtherMessage(message);\n    }\n  }, [message]);\n  const reset = () => {\n    setCitiesWithSnow(0);\n    setLoadedNumber(0);\n    setToLoadNumber(0);\n    setOtherMessage('');\n  };\n  return {\n    citiesWithSnow,\n    loadedNumber,\n    toLoadNumber,\n    otherMessage,\n    city,\n    reset\n  };\n}\n_s(useLoadSnowResults, \"3RYpz+1+vDIthDRTNqZfMZHSjHc=\");","map":{"version":3,"names":["useEffect","useState","CityResponse","cityPropMap","useLoadSnowResults","props","_s","message","citiesWithSnow","setCitiesWithSnow","loadedNumber","setLoadedNumber","toLoadNumber","setToLoadNumber","otherMessage","setOtherMessage","city","setCity","console","log","cityProps","val","split","shift","hasSnow","prev","indexOf","Number","substring","reset"],"sources":["C:/Users/paulm/Documents/Local Programming/Websites/SnowFinder/frontend/src/hooks/useLoadSnowResults.ts"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport CityResponse from \"src/classes/CityResponse\";\r\n\r\ninterface useLoadSnowResultsProps {\r\n    message: string;\r\n};\r\n\r\nconst cityPropMap: string[] = ['hasSnow', 'name', 'state', 'snowDepth', 'temp', 'distanceAway'];\r\n\r\nexport default function useLoadSnowResults (props: useLoadSnowResultsProps) {\r\n\r\n    const { message } = props;\r\n\r\n    const [citiesWithSnow, setCitiesWithSnow] = useState(0);\r\n    const [loadedNumber, setLoadedNumber] = useState(0);\r\n    const [toLoadNumber, setToLoadNumber] = useState(0);\r\n    const [otherMessage, setOtherMessage] = useState('');\r\n    const [city, setCity] = useState(new CityResponse());\r\n\r\n    useEffect(() => {\r\n\r\n        console.log(message);\r\n\r\n        if (message[0] === 'X' || message[0] === 'O') {\r\n            const cityProps: any = {};\r\n            for (let val of message.split(',')) {\r\n                cityProps[`${cityPropMap.shift()}`] = val;\r\n            }\r\n            setCity(cityProps);\r\n\r\n            if (cityProps.hasSnow) setCitiesWithSnow(prev => ++prev);\r\n            setLoadedNumber(prev => ++prev);\r\n        } else if (message.indexOf(' results') !== -1) {\r\n            setToLoadNumber(Number(message.substring(0, message.indexOf(' '))));\r\n        } else {\r\n            setOtherMessage(message);\r\n        }\r\n    }, [message]);\r\n\r\n    const reset = () => {\r\n        setCitiesWithSnow(0);\r\n        setLoadedNumber(0);\r\n        setToLoadNumber(0);\r\n        setOtherMessage('');\r\n    }\r\n\r\n    return {\r\n        citiesWithSnow,\r\n        loadedNumber,\r\n        toLoadNumber,\r\n        otherMessage,\r\n        city,\r\n        reset\r\n    }\r\n}"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,OAAOC,YAAY,MAAM,0BAA0B;AAIlD;AAED,MAAMC,WAAqB,GAAG,CAAC,SAAS,EAAE,MAAM,EAAE,OAAO,EAAE,WAAW,EAAE,MAAM,EAAE,cAAc,CAAC;AAE/F,eAAe,SAASC,kBAAkBA,CAAEC,KAA8B,EAAE;EAAAC,EAAA;EAExE,MAAM;IAAEC;EAAQ,CAAC,GAAGF,KAAK;EAEzB,MAAM,CAACG,cAAc,EAAEC,iBAAiB,CAAC,GAAGR,QAAQ,CAAC,CAAC,CAAC;EACvD,MAAM,CAACS,YAAY,EAAEC,eAAe,CAAC,GAAGV,QAAQ,CAAC,CAAC,CAAC;EACnD,MAAM,CAACW,YAAY,EAAEC,eAAe,CAAC,GAAGZ,QAAQ,CAAC,CAAC,CAAC;EACnD,MAAM,CAACa,YAAY,EAAEC,eAAe,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACe,IAAI,EAAEC,OAAO,CAAC,GAAGhB,QAAQ,CAAC,IAAIC,YAAY,EAAE,CAAC;EAEpDF,SAAS,CAAC,MAAM;IAEZkB,OAAO,CAACC,GAAG,CAACZ,OAAO,CAAC;IAEpB,IAAIA,OAAO,CAAC,CAAC,CAAC,KAAK,GAAG,IAAIA,OAAO,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;MAC1C,MAAMa,SAAc,GAAG,CAAC,CAAC;MACzB,KAAK,IAAIC,GAAG,IAAId,OAAO,CAACe,KAAK,CAAC,GAAG,CAAC,EAAE;QAChCF,SAAS,CAAE,GAAEjB,WAAW,CAACoB,KAAK,EAAG,EAAC,CAAC,GAAGF,GAAG;MAC7C;MACAJ,OAAO,CAACG,SAAS,CAAC;MAElB,IAAIA,SAAS,CAACI,OAAO,EAAEf,iBAAiB,CAACgB,IAAI,IAAI,EAAEA,IAAI,CAAC;MACxDd,eAAe,CAACc,IAAI,IAAI,EAAEA,IAAI,CAAC;IACnC,CAAC,MAAM,IAAIlB,OAAO,CAACmB,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,EAAE;MAC3Cb,eAAe,CAACc,MAAM,CAACpB,OAAO,CAACqB,SAAS,CAAC,CAAC,EAAErB,OAAO,CAACmB,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACvE,CAAC,MAAM;MACHX,eAAe,CAACR,OAAO,CAAC;IAC5B;EACJ,CAAC,EAAE,CAACA,OAAO,CAAC,CAAC;EAEb,MAAMsB,KAAK,GAAGA,CAAA,KAAM;IAChBpB,iBAAiB,CAAC,CAAC,CAAC;IACpBE,eAAe,CAAC,CAAC,CAAC;IAClBE,eAAe,CAAC,CAAC,CAAC;IAClBE,eAAe,CAAC,EAAE,CAAC;EACvB,CAAC;EAED,OAAO;IACHP,cAAc;IACdE,YAAY;IACZE,YAAY;IACZE,YAAY;IACZE,IAAI;IACJa;EACJ,CAAC;AACL;AAACvB,EAAA,CA7CuBF,kBAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}