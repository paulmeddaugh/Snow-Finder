{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport SockJS from 'sockjs-client';\nimport { Stomp } from \"@stomp/stompjs\";\nlet stompClient;\nexport default function useStomp(connectionUrl) {\n  _s();\n  const [message, setMessage] = useState('');\n  useEffect(() => {\n    const socket = new SockJS(connectionUrl);\n    stompClient = Stomp.over(socket);\n    stompClient.connect({}, function () {\n      stompClient.subscribe('/results/snow', function (greeting) {\n        setMessage(JSON.parse(greeting.body).city);\n      });\n    });\n  }, [connectionUrl]);\n  const send = () => {\n    stompClient.send(\"/find/snow\", {}, JSON.stringify({\n      'name': \"connect\"\n    }));\n  };\n  return {\n    message,\n    send\n  };\n}\n_s(useStomp, \"3v4ozrfWvlmZ97O5zgyhgDZKC+M=\");","map":{"version":3,"names":["useEffect","useState","SockJS","Stomp","stompClient","useStomp","connectionUrl","_s","message","setMessage","socket","over","connect","subscribe","greeting","JSON","parse","body","city","send","stringify"],"sources":["C:/Users/paulm/Documents/Local Programming/Websites/SnowFinder/frontend/src/hooks/useStomp.tsx"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\nimport SockJS from 'sockjs-client';\r\nimport { CompatClient, Stomp } from \"@stomp/stompjs\";\r\n\r\nlet stompClient: CompatClient;\r\n\r\nexport default function useStomp(connectionUrl: string) {\r\n    const [message, setMessage] = useState('');\r\n\r\n    useEffect(() => {\r\n        const socket = new SockJS(connectionUrl);\r\n        stompClient = Stomp.over(socket);\r\n        stompClient.connect({}, function () {\r\n            stompClient.subscribe('/results/snow', function (greeting) {\r\n                setMessage(JSON.parse(greeting.body).city);\r\n            });\r\n        });\r\n    }, [connectionUrl]);\r\n\r\n    const send = () => {\r\n        stompClient.send(\"/find/snow\", {}, JSON.stringify({'name': \"connect\"}));\r\n    };\r\n\r\n    return {\r\n        message,\r\n        send\r\n    }\r\n}"],"mappings":";AAAA,SAASA,SAAS,EAAUC,QAAQ,QAAQ,OAAO;AACnD,OAAOC,MAAM,MAAM,eAAe;AAClC,SAAuBC,KAAK,QAAQ,gBAAgB;AAEpD,IAAIC,WAAyB;AAE7B,eAAe,SAASC,QAAQA,CAACC,aAAqB,EAAE;EAAAC,EAAA;EACpD,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EAE1CD,SAAS,CAAC,MAAM;IACZ,MAAMU,MAAM,GAAG,IAAIR,MAAM,CAACI,aAAa,CAAC;IACxCF,WAAW,GAAGD,KAAK,CAACQ,IAAI,CAACD,MAAM,CAAC;IAChCN,WAAW,CAACQ,OAAO,CAAC,CAAC,CAAC,EAAE,YAAY;MAChCR,WAAW,CAACS,SAAS,CAAC,eAAe,EAAE,UAAUC,QAAQ,EAAE;QACvDL,UAAU,CAACM,IAAI,CAACC,KAAK,CAACF,QAAQ,CAACG,IAAI,CAAC,CAACC,IAAI,CAAC;MAC9C,CAAC,CAAC;IACN,CAAC,CAAC;EACN,CAAC,EAAE,CAACZ,aAAa,CAAC,CAAC;EAEnB,MAAMa,IAAI,GAAGA,CAAA,KAAM;IACff,WAAW,CAACe,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,EAAEJ,IAAI,CAACK,SAAS,CAAC;MAAC,MAAM,EAAE;IAAS,CAAC,CAAC,CAAC;EAC3E,CAAC;EAED,OAAO;IACHZ,OAAO;IACPW;EACJ,CAAC;AACL;AAACZ,EAAA,CArBuBF,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}